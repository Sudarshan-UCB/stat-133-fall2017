---
title: 'Lab 2: Vectors and other data structures'
subtitle: "Stat 133, Fall 2017"
author: "Sudarshan Srirangapatanam"
date: "September 1, 2017"
output: html_document
---

```{r setup}
rm(list = ls()) # Cleaning workplace

load("data/nba2017-salary-points.RData") # Load data

check_length <- function(...){
  num <- length(list(...))
  lengths <- 0
  for (i in 1:num){
    lengths[i] <- length(list(...)[[i]])
  }
  for (j in 1:(num-1)){
    if (lengths[j] != lengths[j+1]){
      return("All objects are NOT of Equal length")
    }
  }
  return("All objects are of Equal length")
}

four <- player[1:4] # First four players
```

## Variable used and descriptions

Data is taken from `https://github.com/ucb-stat133/stat133-fall-2017/raw/master/data/nba2017-salary-points.RData`

- `player`: name of the player.\
  Class of object: `r class(player)`\
  This object is a Vector: `r is.vector(player)`\
  Summary (Length): `r summary(player)[1]`
  
- `team`: team name abbreviation.\
  Class of object: `r class(team)`\
  This object is a Vector: `r is.vector(team)`\
  Summary: List of Teams that correspond to the player.
  
- `position`: player position.\
  Class of object: `r class(position)`\
  This object is a Vector: `r is.vector(position)`\
  Summary (Length): `r summary(position)[1]`
  
- `salary`: salary (in dollars).\
  Class of object: `r class(salary)`\
  This object is a Vector: `r is.vector(salary)`\
  Summary (Min, Median, Mean, Max): `r summary(salary)[c(1,3,4,6)]`
  
- `points`: total scored points.\
  Class of object: `r class(points)`\
  This object is a Vector: `r is.vector(points)`\
  Summary (Min, Median, Mean, Max): `r summary(points)[c(1,3,4,6)]`
  
- `points1`: number of free throws, worth 1 point each.\
  Class of object: `r class(points1)`\
  This object is a Vector: `r is.vector(points1)`\
  Summary (Min, Median, Mean, Max): `r summary(points1)[c(1,3,4,6)]`
  
- `points2`: number of 2-point field goals, worth 2 points each.\
  Class of object: `r class(points2)`\
  This object is a Vector: `r is.vector(points1)`\
  Summary (Min, Median, Mean, Max): `r summary(points2)[c(1,3,4,6)]`
  
- `points3`: number of 3-point field goals, worth 3 points each.\
  Class of object: `r class(points3)`\
  This object is a Vector: `r is.vector(points3)`\
  Summary (Min, Median, Mean, Max): `r summary(points3)[c(1,3,4,6)]`
  
**Do all the objects have the same length?**\
`r check_length(player, team, position, salary, points, points1, points2, points3)`

**First four player:**\
`r four`

**What happens if you specify:**

- an index of zero: `four[0]`?\
  `r four[0]`\
  We always get a "0" as an answer with the same class as the original vector.

- a negative index: `four[-1]`?\
  `r four[-1]`\
  The value of index associated with the negative sign is removed.

- various negative indices: `four[-c(1,2,3)]`?
  `r four[-c(1,2,3)]`\
  All indexes associated with negative is removed.

- an index greater than the length of the vector: `four[5]`?
  `r four[5]`\
  We always get a "NA" as an answer.
  
- repeated indices: `four[c(1,2,2,3,3,3)]`?
  `r four[c(1,2,2,3,3,3)]`
  The value of the index is used everytime an index is encountered. Repeated indices results in repeated value.

## Using `seq()` and `rep()`:
```{r seq_rep}
even <- seq(from = 0, to = length(player), by = 2) # all even indexes
odd <- seq(from = 1, to = length(player), by = 2) # all odd indexes
fives <- seq(from = 0, to = length(player), by = 5) # multiples of five
tens <- seq(from = 0, to = length(player), by = 10) # multiples of tens 

player_odd <- player[-even]
salary_even <- salary[-odd]
team_non_fives <- team[-fives]
points_non_tens <- points[-tens]

```

*Only a few first and last elements are shown*

Subtracting all even elements of `player`:\
`r c(head(player_odd), tail(player_odd))`

Subtracting all odd elements of `salary`:\
`r c(head(salary_even), tail(salary_even))`

Subtracting all multiples of 5 (e.g. 5, 10, 15, etc) of `team`:\
`r c(head(team_non_fives), tail(team_non_fives))`

Subtracting positions 10, 20, 30, 40, etc of `points`:\
`r c(head(points_non_tens), tail(points_non_tens))`

## Logical Subsetting
```{r logical}
logical_a <- four[c(TRUE, TRUE, TRUE, TRUE)]
logical_b <- four[c(TRUE, TRUE, FALSE, FALSE)]
logical_c <- four[c(FALSE, FALSE, TRUE, TRUE)]
logical_d <- four[c(TRUE, FALSE, TRUE, FALSE)]
logical_e <- four[c(FALSE, FALSE, FALSE, FALSE)]

# Commands to questions after Your Turn
logical_f <- player[team == "GSW" & position == "C"]
logical_g <- player[team == "LAL" & (position == "SG" | position == "PG")]
logical_h <- player[salary == max(salary)]
logical_i <- player[salary == min(salary)]
logical_j <- player[points == max(points)]
logical_k <- team[points == max(points)]
logical_l <- player[points3 == max(points3)]

# Subsetting with character vector
warriors <- player[team == "GSW"]

warriors_salary <- salary[team == "GSW"]
names(warriors_salary) <- warriors # Assinging names
```

* `four[c(TRUE, TRUE, TRUE, TRUE)]`:\
  `r logical_a`

* `four[c(TRUE, TRUE, FALSE, FALSE)]`:\
  `r logical_b`

* `four[c(FALSE, FALSE, TRUE, TRUE)]`:\
  `r logical_c`

* `four[c(TRUE, FALSE, TRUE, FALSE)]`:\
  `r logical_d`

* `four[c(FALSE, FALSE, FALSE, FALSE)]`:\
  `r logical_e`
  
* subset Centers of Warriors (GSW):\
  `r logical_f`

* subset Shooting Guards and Point Guards of Lakers (LAL):\
  `r logical_g`

* name of the player with largest salary:\
  `r logical_h`

* name of the player with smallest salary:\
  `r logical_i`

* name of the player with largest number of points:\
  `r logical_j`

* team of the player with the largest number of points:\
  `r logical_k`

* name of the player with the largest number of 3-pointers:\
  `r logical_l`

* `warriors`:\
  `r warriors`
  
* `warriors_salary`:\
  `r warriors_salary`
  
* Using Character subsetting:\
  `r warriors_salary["Andre Iguodala"]`\
  `r warriors_salary[c("Stephen Curry", "Kevin Durant")]`

## Plotting

**Scatter plot of `points` and `salary`:**
```{r scatter}
plot(points, salary)
```

**Looking at the generated plot, can you see any issues?**\
Plot is too crowded on one corner but not ont he other corner. Plot doesn't have enough resolution to estimate a pattern at first sight.

**Scatter plot using log transformed vectors:**
```{r scatter_log}
log_points <- log(points)
log_salary <- log(salary)
plot(log_points, log_salary)
#text(log_points, log_salary, labels = abbreviate(player)) # Adding and shortening names
```

## Recycling
```{r recycle}
salary_mill <- salary / (10^6)

#height_cms <- height * 2.54 # This is not given the data
```

## Factors
```{r factor}
position_fac <- factor(position)

# Manipulating factors
factor_a <- position_fac[team == "GSW"]
factor_b <- position_fac[salary_mill > 15]
factor_c <- table(position_fac[salary_mill > 15])
factor_d <- prop.table(table(team[position_fac == 'SG']))
```

**Is team a factor:** `r is.factor(team)`

Frequencies of positions:\
`r table(position_fac)`

**manipulating factors:**

* positions of Warriors:\
  `r factor_a`

* positions of players with salaries > 15 millions:\
  `r factor_b`

* frequencies (counts) of positions with salaries > 15 millions:\
  `r names(factor_c)` => `r factor_c`

* relative frequencies (proportions) of 'SG' (Shooting Guards) in each team:\
  `r names(factor_d)` => `r factor_d`